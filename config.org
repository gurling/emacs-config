#+TITLE:Emily's GNU Emacs Config
#+AUTHOR: Emily
#+DESCRIPTION: Emily's personal Emacs config
#+STARTUP: showeverything
#+OPTIONS: toc:2

My personal Emacs config

* TABLE OF CONTENTS :toc:
- [[#important-programs-to-load-first][Important Programs to load first]]
  - [[#package-manager][Package Manager]]
  - [[#evil-mode][Evil Mode]]
  - [[#general-keybindings][General Keybindings]]
- [[#fonts][Fonts]]
- [[#which-key][which-key]]
- [[#gui-tweaks][GUI Tweaks]]
  - [[#disable-menubar-toolbar-scrollbar-and-splash-screen][Disable Menubar, Toolbar, Scrollbar and Splash screen]]
  - [[#display-line-numbers-and-truncated-lines][Display Line Numbers and Truncated Lines]]
  - [[#pdfs][PDFs]]
  - [[#doom-modeline][Doom Modeline]]
- [[#org-mode][Org Mode]]
  - [[#table-of-contents][Table Of Contents]]
  - [[#org-bullets][Org Bullets]]
  - [[#disable-electric-indent-mode][Disable Electric Indent mode]]
  - [[#inline-images][Inline Images]]
- [[#catppuccin-theme][Catppuccin theme]]
- [[#latex-classes][LaTeX classes]]

* Important Programs to load first

** Package Manager

Bootstrap the package manager (straight.el)

#+BEGIN_SRC emacs-lisp
(add-to-list 'exec-path "C:/Git/bin")
(setq magit-git-executable "C:/Git/bin/git.exe")         
    (defvar bootstrap-version)
    (let ((bootstrap-file
           (expand-file-name
            "straight/repos/straight.el/bootstrap.el"
            (or (bound-and-true-p straight-base-dir)
                user-emacs-directory)))
          (bootstrap-version 7))
      (unless (file-exists-p bootstrap-file)
        (with-current-buffer
            (url-retrieve-synchronously
             "https://raw.githubusercontent.com/radian-software/straight.el/develop/install.el"
             'silent 'inhibit-cookies)
          (goto-char (point-max))
          (eval-print-last-sexp)))
      (load bootstrap-file nil 'nomessage))

  (straight-use-package 'use-package)
  (setq straigt-use-package-by-default t)
  (use-package el-patch
  :straight t)
#+END_SRC

** Evil Mode

Install and configure Evil Mode (Vim emulation for Emacs)

#+BEGIN_SRC emacs-lisp
    (use-package evil
    :straight t
    :init
    (setq evil-want-integration t)
    (setq evil-want-keybinding nil)
    (setq evil-vsplit-window-right t)
    (setq evil-split-window-below t))

    (use-package evil-collection
      :straight t
      :after evil
      :config
      (setq evil-collection-mode-list '(dashboard dired ibuffer))
      (evil-collection-init))

    (use-package evil-tutor
      :straight t)

    (require 'evil)
    (evil-mode 1)
#+END_SRC

** General Keybindings

#+BEGIN_SRC emacs-lisp
  (use-package general
    :straight t
    :config
  (general-evil-setup)

  ;; st up 'SPC' (Space) as the global leader key
  (general-create-definer emily/leader-keys
  :states '(normal insert visual emacs)
  :keymaps 'override
  :prefix "SPC" ;; set leader
  :global-prefix "M-SPC") ;; access leader in insert mode

  (emily/leader-keys
   "b" '(:ignore t :wk "buffer")
   "b b" '(switch-to-buffer :wk "Switch buffer")
   "b i" '(ibuffer :wk "Switch buffer")
   "b k" '(kill-this-buffer :wk "Kill this buffer")
   "b n" '(next-buffer :wk "Next buffer")
   "b p" '(previous-buffer :wk "Previous buffer")
   "b r" '(revert-buffer :wk "Reload buffer"))

  (emily/leader-keys
   "f" '(:ignore t :wk "files")
   "f f" '(find-file :wk "find file")
   "f c" '((lambda () (interactive) (find-file "~/.config/emacs/config.org")) :wk "Edit Emacs config"))


  (emily/leader-keys
   "h" '(:ignore t :wk "help")
   "h v" '(describe-variable :wk "describe variable")
   "h f" '(describe-function :wk "describe function")
   "h r r" '((lambda () (interactive) (load-file "~/.config/emacs/init.el")) :wk "Reload Emacs config"))

 (emily/leader-keys ;; misc
  "g c" '(comment-line :wk "comment line"))

  )
#+END_SRC

* Fonts

#+begin_src emacs-lisp
    (set-face-attribute 'default nil
      :font "Jetbrains Mono"
      :height 150
      :weight 'medium)
    (set-face-attribute 'variable-pitch nil
      :font "Ubuntu"
      :height 150
      :weight 'medium)
    (set-face-attribute 'fixed-pitch nil
      :font "Jetbrains Mono"
      :height 150
      :weight 'medium)
    (set-face-attribute 'default nil
    :font "JetBrains Mono"
    :height 150
    :weight 'medium)
  (set-face-attribute 'variable-pitch nil
    :font "Ubuntu"
    :height 160
    :weight 'medium)
  (set-face-attribute 'fixed-pitch nil
    :font "JetBrains Mono"
    :height 150
    :weight 'medium)
  ;; Makes commented text and keywords italics.
  ;; This is working in emacsclient but not emacs.
  ;; Your font must have an italic face available.
  (set-face-attribute 'font-lock-comment-face nil
    :slant 'italic)
  (set-face-attribute 'font-lock-keyword-face nil
    :slant 'italic)

  ;; This sets the default font on all graphical frames created after restarting Emacs.
  ;; Does the same thing as 'set-face-attribute default' above, but emacsclient fonts
  ;; are not right unless I also add this method of setting the default font.
  (add-to-list 'default-frame-alist '(font . "JetBrains Mono-15"))

  ;; Uncomment the following line if line spacing needs adjusting.
  (setq-default line-spacing 0.12)
  
#+end_src


* which-key

#+BEGIN_SRC emacs-lisp
  (use-package which-key
    :straight t
    :init
      (which-key-mode 1)
    :config
    (setq which-key-side-window-location 'bottom
  	  which-key-sort-order #'which-key-key-order-alpha
  	  which-key-sort-uppercase-first nil
  	  which-key-add-column-padding 1
  	  which-key-max-display-columns nil
  	  which-key-min-display-lines 6
  	  which-key-side-window-slot -10
  	  which-key-side-window-max-height 0.25
  	  which-key-idle-delay 0.8
  	  which-key-max-description-length 25
  	  which-key-allow-imprecise-window-fit t
  	  which-key-separator " → " ))
#+END_SRC

* GUI Tweaks

** Disable Menubar, Toolbar, Scrollbar and Splash screen

#+BEGIN_SRC emacs-lisp
  (menu-bar-mode -1)
  (tool-bar-mode -1)
  (scroll-bar-mode -1)
  (setq inhibit-startup-screen t)

#+END_SRC

** Display Line Numbers and Truncated Lines

#+BEGIN_SRC emacs-lisp
  (global-display-line-numbers-mode 1)
  (global-visual-line-mode t)

#+END_SRC

** PDFs

#+BEGIN_SRC emacs-lisp
  (use-package pdf-tools
    :straight t  ;; uses straight's built-in recipe for vedang/pdf-tools
    :mode ("\\.pdf\\'" . pdf-view-mode)
    :config
    ;; Build and install the epdfinfo server:
    (pdf-tools-install)
    ;; Optional settings:
    (setq-default pdf-view-display-size 'fit-page))
  (add-hook 'pdf-view-mode-hook (lambda () (display-line-numbers-mode -1)))
(use-package pdf-view-restore
  :straight t
  :after pdf-tools
  :config
  (add-hook 'pdf-view-mode-hook 'pdf-view-restore-mode))
#+END_SRC

** Doom Modeline

#+BEGIN_SRC emacs-lisp
(use-package nerd-icons
  :straight t
  :custom
  ;; The Nerd Font you want to use in GUI
  ;; "Symbols Nerd Font Mono" is the default and is recommended
  ;; but you can use any other Nerd Font if you want
  (nerd-icons-font-family "Symbols Nerd Font Mono")
  )
  (use-package doom-modeline
    :straight t
    :ensure t
    :init (doom-modeline-mode 1))
#+END_SRC

* Org Mode

** Table Of Contents

#+BEGIN_SRC emacs-lisp
  (use-package toc-org
    :straight t
    :commands toc-org-enable
    :init (add-hook 'org-mode-hook 'toc-org-enable))
  (setq org-export-exclude-tags '("noexport")) ;; Don't export headings with ":noexport:" tag, useful for TODO 

#+END_SRC

** Org Bullets

#+BEGIN_SRC emacs-lisp
  (add-hook 'org-mode-hook 'org-indent-mode)
  (use-package org-bullets
    :straight t)
  (add-hook 'org-mode-hook (lambda () (org-bullets-mode 1)))

#+END_SRC
** Disable Electric Indent mode

#+BEGIN_SRC emacs-lisp
(electric-indent-mode -1)
#+END_SRC

** Inline Images

#+BEGIN_SRC emacs-lisp
    (setq org-image-actual-width 300)
    ;;(add-hook 'org-mode-hook (lambda () (org-toggle-inline-images 1)))
#+END_SRC

* Catppuccin theme

Install and configure the Catppuccin Emacs theme.

#+BEGIN_SRC emacs-lisp
    (straight-use-package 'catppuccin-theme)
    (load-theme 'catppuccin :no-confirm)
    (setq catppuccin-flavor 'frappe) ;; or 'latte, 'macchiato, or 'mocha
    (catppuccin-reload)

    (defun ctp/text-org-blocks ()
     (face-remap-add-relative 'org-block (list :foreground (catppuccin-get-color 'text))))

  (add-hook 'org-mode-hook 'ctp/text-org-blocks)

#+END_SRC

* LaTeX classes

#+BEGIN_SRC emacs-lisp
(require 'ox-latex)

(add-to-list 'org-latex-classes
             '("spssol-seminarka"
               "\\documentclass[12pt,a4paper]{article}
\\usepackage[a4paper,left=35mm,right=20mm,top=30mm,bottom=30mm]{geometry}
\\usepackage[czech]{babel}
\\usepackage[utf8]{inputenc}
\\usepackage[T1]{fontenc}
\\usepackage{times}           % podobné Times New Roman
\\usepackage{setspace}
\\onehalfspacing              % řádkování 1,5
\\pagestyle{plain}"           
               ("\\section{%s}" . "\\section*{%s}")
               ("\\subsection{%s}" . "\\subsection*{%s}")
               ("\\subsubsection{%s}" . "\\subsubsection*{%s}")
               ("\\paragraph{%s}" . "\\paragraph*{%s}")
               ("\\subparagraph{%s}" . "\\subparagraph*{%s}")))

#+END_SRC
